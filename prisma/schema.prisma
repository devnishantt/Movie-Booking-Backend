generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum UserRoles {
  USER
  ADMIN
}

enum MovieStatus {
  COMING_SOON
  NOW_SHOWING
  ENDED
}

model User {
  id           String    @unique @default(uuid())
  email        String    @unique
  password     String    @map("hashed_password")
  firstName    String
  lastName     String?
  phone        String?
  role         UserRoles @default(USER)
  isActive     Boolean   @default(true)
  lastLogin    DateTime  @default(now())
  refreshToken String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  @@index([email])
  @@index([role])
  @@map("users")
}

model Movie {
  id          String      @id @default(uuid())
  title       String
  description String      @db.Text
  duration    Int
  language    String
  director    String
  genre       String
  releaseDate DateTime
  posterUrl   String?
  trailerUrl  String?
  status      MovieStatus @default(COMING_SOON)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt

  @@index([status])
  @@index([genre])
  @@map("movies")
}
